import{world as s}from"mojang-minecraft";import{players as e,whitelist as t}from"scripts/credentials/access.js";import{client as m}from"scripts/gametests/commands/message.js";import*as r from"mojang-minecraft";import*as i from"mojang-gametest";import{viewObj as a}from"scripts/viewObj.js";import{md5 as n}from"scripts/blueimp-md5/md5.js";import{SHA256 as o}from"scripts/sha256.js";import*as c from"scripts/@types/mojang-minecraft/index.js";import*as g from"scripts/@types/mojang-gametest/index.js";function p(s){return"mojang-minecraft"==s?c:"mojang-gametest"==s?g:void 0}s.events.beforeChat.subscribe((s=>{let c=s.sender.name??s.sender.nameTag,g=!1;if(g=!(1!=t||!e.includes(c))||0==t,"$"==s.message.substring(0,1)&&1==g){s.cancel=!0,m(c,`$${s.message.substring(1)}`);try{new Function("Minecraft","GameTest","viewObj","md5","sha256","getIndex",`return (function () { ${s.message.substring(1)} });`)(r,i,a,n,o,p)()}catch(s){m(c,`Â§c${String(s)}`)}}}));
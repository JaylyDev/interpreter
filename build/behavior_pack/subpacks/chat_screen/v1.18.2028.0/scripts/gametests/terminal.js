import{world as s}from"mojang-minecraft";import{players as m,whitelist as e}from"scripts/credentials/access.js";import{client as t}from"scripts/gametests/commands/message.js";import*as r from"mojang-minecraft";import*as i from"mojang-gametest";import*as a from"mojang-minecraft-ui";import{viewObj as n}from"scripts/viewObj.js";import{md5 as o}from"scripts/blueimp-md5/md5.js";import{SHA256 as c}from"scripts/sha256.js";import*as f from"scripts/@types/mojang-minecraft/index.js";import*as g from"scripts/@types/mojang-gametest/index.js";import*as p from"scripts/@types/mojang-minecraft-ui/index.js";function j(s){return"mojang-minecraft"==s?f:"mojang-gametest"==s?g:"mojang-minecraft-ui"==s?p:void 0}s.events.beforeChat.subscribe((s=>{let f=s.sender.name??s.sender.nameTag,g=!1;if(g=!(1!=e||!m.includes(f))||0==e,"$"==s.message.substring(0,1)&&1==g){s.cancel=!0,t(f,`$${s.message.substring(1)}`);try{new Function("Minecraft","GameTest","UI","viewObj","md5","sha256","getIndex",`return (function () { ${s.message.substring(1)} });`)(r,i,a,n,o,c,j)()}catch(s){t(f,`Â§c${String(s)}`)}}}));